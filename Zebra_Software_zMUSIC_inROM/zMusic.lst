ca65 V2.18 - Ubuntu 2.18-1
Main file   : zMusic.s
Current file: zMusic.s

000000r 1               ;=====================piano=====================
000000r 1               ;
000000r 1               .org $BD50
00BD50  1               
00BD50  1  01 01 00 01  TUNE_PAD: .byte 1,1,0,1,1,1
00BD54  1  01 01        
00BD56  1               
00BD56  1                                        ; C,  C_S, D, D_S, E, F, F_S,  G,   G_S,  A,  A_S,  B,
00BD56  1  44 15 E8 BF  NOTE_TABLE_C3_R00: .byte 68, 21, 232, 191, 151, 114, 79, 46, 14, 241, 213, 186    ;octave 3
00BD5A  1  97 72 4F 2E  
00BD5E  1  0E F1 D5 BA  
00BD62  1  A2 8A 74 5F  NOTE_TABLE_C4_R00: .byte 162, 138, 116, 95, 75, 57, 39, 23, 7, 248, 234, 221     ;octave 4
00BD66  1  4B 39 27 17  
00BD6A  1  07 F8 EA DD  
00BD6E  1  D1 C5 BA AF  NOTE_TABLE_C5_R00: .byte 209, 197, 186, 175, 165, 156, 147, 139, 131, 124, 117, 110  ;octave 5
00BD72  1  A5 9C 93 8B  
00BD76  1  83 7C 75 6E  
00BD7A  1  03 03 02 02  NOTE_TABLE_C3_R01: .byte 3, 3, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1
00BD7E  1  02 02 02 02  
00BD82  1  02 01 01 01  
00BD86  1  01 01 01 01  NOTE_TABLE_C4_R01: .byte   1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0
00BD8A  1  01 01 01 01  
00BD8E  1  01 00 00 00  
00BD92  1  00 00 00 00  NOTE_TABLE_C5_R01: .byte   0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
00BD96  1  00 00 00 00  
00BD9A  1  00 00 00 00  
00BD9E  1               ;KEY_PAD_CHAR: .byte 'A','W','S','E','D','F','T','G','Y','H','U','J','C','4'
00BD9E  1               ;KEY_PAD_CHAR_LOW: .byte 'a','w','s','e','d','f','t','g','y','h','u','j','c','4'
00BD9E  1               ;KEY_PAD_PIXEL: .byte $64,$51,$66,$53,$68,$69,$56,$6B,$58,$6D,$5A,$6F,$B8,$B9
00BD9E  1               ;REG_PAD: .byte $00,$A0,$01,$A0,$02,$A0,$03,$A0,$04,$A0,$05,$A0
00BD9E  1               
00BD9E  1  2A 2A 20 5A  MSG_ZUTA:      .byte "** Zebra   Music **",0
00BDA2  1  65 62 72 61  
00BDA6  1  20 20 20 4D  
00BDB2  1                                    ;123456789ABCDEFGHIJK123456789ABCDEFGHIJK
00BDB2  1               
00BDB2  1               KEY_IS_PRESSED     = $2F
00BDB2  1               
00BDB2  1               IS_WEAK = $2D
00BDB2  1               IS_WEAK_2 = $2C
00BDB2  1               NOTE_VECTOR_R0 = $10
00BDB2  1               NOTE_VECTOR_R1 = $12
00BDB2  1               CHANNEL_VOCTOR = $14
00BDB2  1               
00BDB2  1               VOL = $30
00BDB2  1               
00BDB2  1               
00BDB2  1               A_COUNT = $16
00BDB2  1               B_COUNT = $17
00BDB2  1               C_COUNT = $18
00BDB2  1               COUNT_VECTOR = $19
00BDB2  1               
00BDB2  1               REG_VECTOR = $2B
00BDB2  1               
00BDB2  1               Y_NOTE_TEMP = $2D
00BDB2  1               Y_NOTE_TEMP_1 = $20
00BDB2  1               Y_NOTE_TEMP_2 = $24
00BDB2  1               SHARP = $25
00BDB2  1               COUNT_TEMP = $26
00BDB2  1               ASCII_PATCH = $27
00BDB2  1               FINISH_NOTE = $28
00BDB2  1               X_TEMP = $29
00BDB2  1               
00BDB2  1               A_NOTE = $0A00
00BDB2  1               B_NOTE = $0B00
00BDB2  1               C_NOTE = $0C00
00BDB2  1               
00BDB2  1               VRAM_BEGIN = $7338
00BDB2  1               MSGL = $21
00BDB2  1               MSGH = $22
00BDB2  1               OK_CHANNEL = $23
00BDB2  1               
00BDB2  1               
00BDB2  1  A9 FF        ZUTA:       LDA #$FF               ;clear screen
00BDB4  1  8D 20 80                 STA $8020
00BDB7  1  A9 9E                    LDA #<MSG_ZUTA         ;show welcome screen
00BDB9  1  85 21                    STA MSGL
00BDBB  1  A9 BD                    LDA #>MSG_ZUTA
00BDBD  1  85 22                    STA MSGH
00BDBF  1  20 EF BF                 JSR SHWMSG
00BDC2  1               
00BDC2  1  A9 09                    LDA #$09               ;set button states
00BDC4  1  85 2D                    STA IS_WEAK
00BDC6  1  A9 FF                    LDA #$FF
00BDC8  1  85 2C                    STA IS_WEAK_2
00BDCA  1               
00BDCA  1  A9 00                    LDA #$00
00BDCC  1  85 30                    STA VOL
00BDCE  1               
00BDCE  1               ;===========================================
00BDCE  1  85 16                    STA A_COUNT
00BDD0  1  85 17                    STA B_COUNT
00BDD2  1  85 18                    STA C_COUNT
00BDD4  1               ;===========================================
00BDD4  1  85 19                    STA COUNT_VECTOR
00BDD6  1  85 28                    STA FINISH_NOTE
00BDD8  1               
00BDD8  1  85 25                    STA SHARP
00BDDA  1               
00BDDA  1               
00BDDA  1               
00BDDA  1  A9 62                    LDA #<NOTE_TABLE_C4_R00
00BDDC  1  85 10                    STA NOTE_VECTOR_R0
00BDDE  1  A9 BD                    LDA #>NOTE_TABLE_C4_R00
00BDE0  1  85 11                    STA NOTE_VECTOR_R0+1
00BDE2  1               
00BDE2  1  A9 86                    LDA #<NOTE_TABLE_C4_R01
00BDE4  1  85 12                    STA NOTE_VECTOR_R1
00BDE6  1  A9 BD                    LDA #>NOTE_TABLE_C4_R01
00BDE8  1  85 13                    STA NOTE_VECTOR_R1+1
00BDEA  1               
00BDEA  1  A9 00                    LDA #<A_NOTE            ;default A Channel editer
00BDEC  1  85 14                    STA CHANNEL_VOCTOR
00BDEE  1  A9 0A                    LDA #>A_NOTE
00BDF0  1  85 15                    STA CHANNEL_VOCTOR+1
00BDF2  1               
00BDF2  1               
00BDF2  1  A9 16                    LDA #<A_COUNT
00BDF4  1  85 19                    STA COUNT_VECTOR
00BDF6  1  A9 00                    LDA #>A_COUNT
00BDF8  1  85 1A                    STA COUNT_VECTOR+1
00BDFA  1               
00BDFA  1                      ;      LDA #<REG_PAD
00BDFA  1                      ;      STA REG_VECTOR
00BDFA  1                      ;      LDA #>REG_PAD
00BDFA  1                      ;      STA REG_VECTOR+1
00BDFA  1               
00BDFA  1  A9 40                    LDA #$40
00BDFC  1  85 27                    STA ASCII_PATCH
00BDFE  1               
00BDFE  1                           ;LDX #$00
00BDFE  1  A0 00                    LDY #$00
00BE00  1               
00BE00  1  AD 01 80     GET_NOTE:   LDA $8001
00BE03  1  C9 00                    CMP #$00
00BE05  1  F0 F9                    BEQ GET_NOTE
00BE07  1  C9 70                    CMP #'p'
00BE09  1  F0 59                    BEQ PLAY_NOTE_0
00BE0B  1  C9 61                    CMP #'a'
00BE0D  1  F0 15                    BEQ SET_CHANNEL_A
00BE0F  1  C9 62                    CMP #'b'
00BE11  1  F0 31                    BEQ SET_CHANNEL_B
00BE13  1  C9 63                    CMP #'c'
00BE15  1  F0 50                    BEQ SET_CHANNEL_C
00BE17  1                           ; CMP #'N'
00BE17  1                           ; BEQ NEW_NOTE
00BE17  1  C9 64                    CMP #'d'
00BE19  1  F0 72                    BEQ BS_BUTTON
00BE1B  1               
00BE1B  1                           ;INX
00BE1B  1  91 14                    STA (CHANNEL_VOCTOR),Y
00BE1D  1  99 38 73                 STA VRAM_BEGIN,Y
00BE20  1  C8                       INY
00BE21  1  4C 00 BE                 JMP GET_NOTE
00BE24  1               
00BE24  1               
00BE24  1               
00BE24  1               SET_CHANNEL_A:
00BE24  1               
00BE24  1               
00BE24  1  20 87 BE                 JSR SAVE_COUNT
00BE27  1  A9 FF                    LDA #$FF               ;clear screen
00BE29  1  8D 20 80                 STA $8020
00BE2C  1  A9 41                    LDA #'A'
00BE2E  1  8D 10 73                 STA $7310
00BE31  1  A9 00                    LDA #<A_NOTE
00BE33  1  85 14                    STA CHANNEL_VOCTOR
00BE35  1  A9 0A                    LDA #>A_NOTE
00BE37  1  85 15                    STA CHANNEL_VOCTOR+1
00BE39  1               
00BE39  1               
00BE39  1               
00BE39  1  A9 16                    LDA #<A_COUNT
00BE3B  1  85 19                    STA COUNT_VECTOR
00BE3D  1  A9 00                    LDA #>A_COUNT
00BE3F  1  85 1A                    STA COUNT_VECTOR+1
00BE41  1               
00BE41  1  4C 9B BE                 JMP LIST_NOTE
00BE44  1               
00BE44  1               SET_CHANNEL_B:
00BE44  1               
00BE44  1               
00BE44  1  20 87 BE                   JSR SAVE_COUNT
00BE47  1  A9 FF                    LDA #$FF               ;clear screen
00BE49  1  8D 20 80                 STA $8020
00BE4C  1  A9 42                    LDA #'B'
00BE4E  1  8D 10 73                 STA $7310
00BE51  1  A9 00                    LDA #<B_NOTE
00BE53  1  85 14                    STA CHANNEL_VOCTOR
00BE55  1  A9 0B                    LDA #>B_NOTE
00BE57  1  85 15                    STA CHANNEL_VOCTOR+1
00BE59  1               
00BE59  1               
00BE59  1               
00BE59  1  A9 17                    LDA #<B_COUNT
00BE5B  1  85 19                    STA COUNT_VECTOR
00BE5D  1  A9 00                     LDA #>B_COUNT
00BE5F  1  85 1A                     STA COUNT_VECTOR+1
00BE61  1               
00BE61  1  4C 9B BE                 JMP LIST_NOTE
00BE64  1               
00BE64  1  4C BD BE     PLAY_NOTE_0: JMP INIT_PLAY_NOTE
00BE67  1               
00BE67  1               SET_CHANNEL_C:
00BE67  1               
00BE67  1               
00BE67  1  20 87 BE                 JSR SAVE_COUNT
00BE6A  1  A9 FF                    LDA #$FF               ;clear screen
00BE6C  1  8D 20 80                 STA $8020
00BE6F  1  A9 43                    LDA #'C'
00BE71  1  8D 10 73                 STA $7310
00BE74  1  A9 00                    LDA #<C_NOTE
00BE76  1  85 14                    STA CHANNEL_VOCTOR
00BE78  1  A9 0C                    LDA #>C_NOTE
00BE7A  1  85 15                    STA CHANNEL_VOCTOR+1
00BE7C  1               
00BE7C  1               
00BE7C  1               
00BE7C  1  A9 18                    LDA #<C_COUNT
00BE7E  1  85 19                    STA COUNT_VECTOR
00BE80  1  A9 00                     LDA #>C_COUNT
00BE82  1  85 1A                     STA COUNT_VECTOR+1
00BE84  1               
00BE84  1  4C 9B BE                 JMP LIST_NOTE
00BE87  1               
00BE87  1               SAVE_COUNT:
00BE87  1  98                      TYA
00BE88  1  A0 00                   LDY #$00
00BE8A  1  91 19                   STA (COUNT_VECTOR),Y
00BE8C  1  60                      RTS
00BE8D  1               
00BE8D  1               BS_BUTTON:
00BE8D  1                           ;DEX
00BE8D  1               
00BE8D  1  A9 20                    LDA #$20
00BE8F  1  91 14                    STA (CHANNEL_VOCTOR),Y
00BE91  1  99 38 73                 STA VRAM_BEGIN,Y
00BE94  1  88                       DEY
00BE95  1  4C 00 BE                 JMP GET_NOTE
00BE98  1               
00BE98  1  4C 00 BE     GET_NOTE_0: JMP GET_NOTE
00BE9B  1               
00BE9B  1               LIST_NOTE:
00BE9B  1  B1 19                    LDA (COUNT_VECTOR),Y
00BE9D  1  C9 00                    CMP #$00
00BE9F  1  F0 19                    BEQ RE_GET_NOTE
00BEA1  1               
00BEA1  1  85 26                    STA COUNT_TEMP
00BEA3  1  A0 00                    LDY #$00
00BEA5  1               
00BEA5  1               
00BEA5  1  B1 14        LIST_LOOP:  LDA (CHANNEL_VOCTOR),Y
00BEA7  1  99 38 73                 STA VRAM_BEGIN,Y
00BEAA  1  C8                       INY
00BEAB  1  98                       TYA
00BEAC  1  C5 26                    CMP COUNT_TEMP
00BEAE  1  90 F5                    BCC LIST_LOOP
00BEB0  1  B1 14                    LDA (CHANNEL_VOCTOR),Y
00BEB2  1  99 38 73                 STA VRAM_BEGIN,Y
00BEB5  1                           ;LDY COUNT_TEMP
00BEB5  1  4C 00 BE                 JMP GET_NOTE
00BEB8  1               
00BEB8  1               
00BEB8  1               
00BEB8  1               RE:
00BEB8  1  A4 2D                    LDY Y_NOTE_TEMP
00BEBA  1  4C 00 BE     RE_GET_NOTE:           JMP GET_NOTE
00BEBD  1               
00BEBD  1               
00BEBD  1               INIT_PLAY_NOTE:  ;STY Y_NOTE_TEMP
00BEBD  1  A9 00                    LDA #$00      ; set channel A B C vol to zero
00BEBF  1  8D 08 A0                 STA $A008
00BEC2  1  8D 09 A0                 STA $A009
00BEC5  1  8D 0A A0                 STA $A00A
00BEC8  1  A9 07                    LDA #$07      ;disable all channel
00BECA  1  8D 07 A0                 STA $A007
00BECD  1  A9 00                      LDA #$00
00BECF  1  85 23                      STA OK_CHANNEL
00BED1  1               
00BED1  1  A9 16                    LDA #<A_COUNT
00BED3  1  85 19                    STA COUNT_VECTOR
00BED5  1  A9 00                    LDA #>A_COUNT
00BED7  1  85 1A                    STA COUNT_VECTOR+1
00BED9  1               
00BED9  1               
00BED9  1               GET_NEXT_CHANNEL:
00BED9  1  A0 00                    LDY #$00
00BEDB  1  A2 00                    LDX #$00
00BEDD  1  A5 23                    LDA OK_CHANNEL
00BEDF  1  C9 02                    CMP #$02
00BEE1  1  F0 58                    BEQ GO_FOR_NEXT_NOTE_0
00BEE3  1               
00BEE3  1                           ;JSR NEXT_CHANNEL
00BEE3  1               
00BEE3  1  B1 19                    LDA (COUNT_VECTOR),Y
00BEE5  1  C5 28                    CMP FINISH_NOTE
00BEE7  1  F0 AF                    BEQ GET_NOTE_0
00BEE9  1               
00BEE9  1                           ;LDY #$00
00BEE9  1  B1 14        PLAY_LOOP:  LDA (CHANNEL_VOCTOR),Y
00BEEB  1  C9 23                    CMP #'#'
00BEED  1  F0 4F                    BEQ SET_SHARP
00BEEF  1  C9 41                    CMP #$41 ;A-G
00BEF1  1  B0 1D                    BCS SET_TONE           ; next channel
00BEF3  1  C9 33                    CMP #'3'
00BEF5  1  F0 77                    BEQ SET_OCTAVE_C3_0
00BEF7  1  C9 34                    CMP #'4'
00BEF9  1  F0 76                    BEQ SET_OCTAVE_C4_0
00BEFB  1  C9 35                    CMP #'5'
00BEFD  1  F0 75                    BEQ SET_OCTAVE_C5_0
00BEFF  1  C9 2D                    CMP #'-'
00BF01  1  F0 53                    BEQ SET_PLAY_HOLD    ; next channel
00BF03  1  C9 2E                    CMP #'.'
00BF05  1  F0 58                    BEQ SET_PLAY_OFF     ; next channel
00BF07  1               
00BF07  1                           ;JMP NEXT_CHANNEL
00BF07  1               
00BF07  1  C8                       INY
00BF08  1  98                       TYA
00BF09  1  C5 28                    CMP FINISH_NOTE
00BF0B  1  F0 8B                    BEQ GET_NOTE_0
00BF0D  1  4C E9 BE                 JMP PLAY_LOOP
00BF10  1               
00BF10  1               
00BF10  1  84 20        SET_TONE:   STY Y_NOTE_TEMP_1
00BF12  1  48                       PHA
00BF13  1  A9 0F                    LDA #$0F
00BF15  1  A6 23                    LDX OK_CHANNEL
00BF17  1  95 30                    STA VOL,X
00BF19  1               
00BF19  1  A6 29                    LDX X_TEMP
00BF1B  1  68                       PLA
00BF1C  1  38                       SEC
00BF1D  1  E5 27                    SBC ASCII_PATCH     ; the org TUNE
00BF1F  1               
00BF1F  1  A8                       TAY
00BF20  1  B9 50 BD                 LDA TUNE_PAD,Y
00BF23  1  18                       CLC
00BF24  1  65 25                    ADC SHARP
00BF26  1  A8                       TAY                 ;Y - the TUNE
00BF27  1               
00BF27  1  B1 10                    LDA (NOTE_VECTOR_R0),Y ; SET AY TUNE
00BF29  1  9D 00 A0                 STA $A000,X
00BF2C  1  E8                       INX
00BF2D  1  B1 12                    LDA (NOTE_VECTOR_R1),Y
00BF2F  1  9D 00 A0                 STA $A000,X
00BF32  1  E8                       INX
00BF33  1  86 29                    STX X_TEMP
00BF35  1               
00BF35  1  A4 20                    LDY Y_NOTE_TEMP_1
00BF37  1  C8                       INY
00BF38  1  4C 46 BF                 JMP NEXT_CHANNEL
00BF3B  1               
00BF3B  1  4C 77 BF     GO_FOR_NEXT_NOTE_0: JMP GO_FOR_NEXT_NOTE
00BF3E  1               
00BF3E  1               SET_SHARP:
00BF3E  1  A9 01                    LDA #$01
00BF40  1  85 25                    STA SHARP
00BF42  1  C8                       INY
00BF43  1  4C E9 BE                 JMP PLAY_LOOP
00BF46  1               
00BF46  1               NEXT_CHANNEL:
00BF46  1                           ;STY Y_NOTE_TEMP_1
00BF46  1  A9 00                    LDA #$00
00BF48  1  85 25                    STA SHARP
00BF4A  1               
00BF4A  1               
00BF4A  1  18                       CLC
00BF4B  1  A9 01                    LDA #$01
00BF4D  1  65 15                    ADC CHANNEL_VOCTOR+1
00BF4F  1  85 15                    STA CHANNEL_VOCTOR+1   ;next channel 0A 0B 0C
00BF51  1  E6 23                    INC OK_CHANNEL
00BF53  1               
00BF53  1               
00BF53  1               
00BF53  1  4C D9 BE                 JMP GET_NEXT_CHANNEL
00BF56  1               
00BF56  1               
00BF56  1               SET_PLAY_HOLD:
00BF56  1  E6 29                    INC X_TEMP
00BF58  1  E6 29                    INC X_TEMP
00BF5A  1  E6 23                    INC OK_CHANNEL
00BF5C  1  4C 46 BF                 JMP NEXT_CHANNEL
00BF5F  1               
00BF5F  1               
00BF5F  1               
00BF5F  1               SET_PLAY_OFF:
00BF5F  1  E6 29                    INC X_TEMP
00BF61  1  E6 29                    INC X_TEMP
00BF63  1  A9 00                    LDA #$00
00BF65  1  A6 23                    LDX OK_CHANNEL
00BF67  1  95 30                    STA VOL,X
00BF69  1  E6 23                    INC OK_CHANNEL
00BF6B  1  4C 46 BF                 JMP NEXT_CHANNEL
00BF6E  1               
00BF6E  1  4C 87 BF     SET_OCTAVE_C3_0: JMP SET_OCTAVE_C3
00BF71  1  4C 9A BF     SET_OCTAVE_C4_0: JMP SET_OCTAVE_C4
00BF74  1  4C AD BF     SET_OCTAVE_C5_0: JMP SET_OCTAVE_C5
00BF77  1               
00BF77  1               
00BF77  1               GO_FOR_NEXT_NOTE:
00BF77  1  A9 00                      LDA #$00
00BF79  1  85 29                      STA X_TEMP
00BF7B  1               
00BF7B  1  20 C0 BF                   JSR SET_VOL
00BF7E  1               
00BF7E  1  E6 28                      INC FINISH_NOTE
00BF80  1  A9 00                      LDA #00
00BF82  1  85 23                      STA OK_CHANNEL
00BF84  1  4C D9 BE                   JMP GET_NEXT_CHANNEL
00BF87  1               
00BF87  1               
00BF87  1               
00BF87  1               
00BF87  1               
00BF87  1               
00BF87  1               SET_OCTAVE_C3:
00BF87  1               
00BF87  1               
00BF87  1  A9 56                    LDA #<NOTE_TABLE_C3_R00
00BF89  1  85 10                    STA NOTE_VECTOR_R0
00BF8B  1  A9 BD                    LDA #>NOTE_TABLE_C3_R00
00BF8D  1  85 11                    STA NOTE_VECTOR_R0+1
00BF8F  1               
00BF8F  1  A9 7A                    LDA #<NOTE_TABLE_C3_R01
00BF91  1  85 12                    STA NOTE_VECTOR_R1
00BF93  1  A9 BD                    LDA #>NOTE_TABLE_C3_R01
00BF95  1  85 13                    STA NOTE_VECTOR_R1+1
00BF97  1                           ; LDA #$33
00BF97  1                           ; STA $73B9
00BF97  1  4C E9 BE                 JMP PLAY_LOOP
00BF9A  1               SET_OCTAVE_C4:
00BF9A  1  A9 62                      LDA #<NOTE_TABLE_C4_R00
00BF9C  1  85 10                    STA NOTE_VECTOR_R0
00BF9E  1  A9 BD                    LDA #>NOTE_TABLE_C4_R00
00BFA0  1  85 11                    STA NOTE_VECTOR_R0+1
00BFA2  1               
00BFA2  1  A9 86                    LDA #<NOTE_TABLE_C4_R01
00BFA4  1  85 12                    STA NOTE_VECTOR_R1
00BFA6  1  A9 BD                    LDA #>NOTE_TABLE_C4_R01
00BFA8  1  85 13                    STA NOTE_VECTOR_R1+1
00BFAA  1                           ; LDA #$34
00BFAA  1                           ; STA $73B9
00BFAA  1  4C E9 BE                   JMP PLAY_LOOP
00BFAD  1               SET_OCTAVE_C5:
00BFAD  1  A9 6E                    LDA #<NOTE_TABLE_C5_R00
00BFAF  1  85 10                    STA NOTE_VECTOR_R0
00BFB1  1  A9 BD                    LDA #>NOTE_TABLE_C5_R00
00BFB3  1  85 11                    STA NOTE_VECTOR_R0+1
00BFB5  1               
00BFB5  1  A9 92                    LDA #<NOTE_TABLE_C5_R01
00BFB7  1  85 12                    STA NOTE_VECTOR_R1
00BFB9  1  A9 BD                    LDA #>NOTE_TABLE_C5_R01
00BFBB  1  85 13                    STA NOTE_VECTOR_R1+1
00BFBD  1                           ; LDA #$35
00BFBD  1                           ; STA $73B9
00BFBD  1  4C E9 BE                   JMP PLAY_LOOP
00BFC0  1               
00BFC0  1               
00BFC0  1               
00BFC0  1               
00BFC0  1               
00BFC0  1               SET_VOL:
00BFC0  1  A5 30                    LDA VOL
00BFC2  1  8D 08 A0                 STA $A008
00BFC5  1  A5 31                    LDA VOL+1
00BFC7  1  8D 09 A0                 STA $A009
00BFCA  1  A5 32                    LDA VOL+2
00BFCC  1  8D 0A A0                 STA $A00A
00BFCF  1  A9 08                    LDA #$08
00BFD1  1  8D 07 A0                 STA $A007
00BFD4  1               
00BFD4  1  A9 FF                    LDA #$FF
00BFD6  1  8D 20 80                 STA $8020
00BFD9  1               
00BFD9  1  20 DD BF                 JSR DELAY
00BFDC  1  60                       RTS
00BFDD  1               
00BFDD  1               DELAY:
00BFDD  1  A9 00               LDA #$00
00BFDF  1  C5 2D               CMP IS_WEAK
00BFE1  1  C6 2D               DEC IS_WEAK
00BFE3  1  F0 09               BEQ OVER_DELAY
00BFE5  1               
00BFE5  1                DELAY_1:
00BFE5  1  C5 2C               CMP IS_WEAK_2
00BFE7  1  F0 F4               BEQ DELAY
00BFE9  1  C6 2C               DEC IS_WEAK_2
00BFEB  1  4C DD BF            JMP DELAY
00BFEE  1               OVER_DELAY:
00BFEE  1  60                  RTS
00BFEF  1               
00BFEF  1               
00BFEF  1               
00BFEF  1               
00BFEF  1  A0 00        SHWMSG:     LDY #$0
00BFF1  1  B1 21        PRINT:      LDA (MSGL),Y
00BFF3  1  F0 06                    BEQ DONE
00BFF5  1  20 FC BF                 JSR ECHO
00BFF8  1  C8                       INY
00BFF9  1  D0 F6                    BNE PRINT
00BFFB  1  60           DONE:       RTS
00BFFC  1  8D 02 80     ECHO:       STA $8002
00BFFF  1  60                       RTS
00C000  1               
00C000  1               
